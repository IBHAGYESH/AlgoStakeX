{
    "hints": {
        "stake(string,uint64,bool,uint64,uint64,string,uint64,string)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(string)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "emergencyWithdraw(string,uint64)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "hasValidStake(string,string,uint64)bool": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getStakeInfo(string,string)(address,uint64,bool,uint64,uint64,uint64,uint64,string,uint64,string,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            },
            "structs": {
                "output": {
                    "name": "StakeData",
                    "elements": [
                        [
                            "staker",
                            "address"
                        ],
                        [
                            "tokenId",
                            "uint64"
                        ],
                        [
                            "isFlexible",
                            "bool"
                        ],
                        [
                            "amount",
                            "uint64"
                        ],
                        [
                            "stakedAt",
                            "uint64"
                        ],
                        [
                            "lockPeriod",
                            "uint64"
                        ],
                        [
                            "lockEndTime",
                            "uint64"
                        ],
                        [
                            "rewardType",
                            "string"
                        ],
                        [
                            "rewardRate",
                            "uint64"
                        ],
                        [
                            "utility",
                            "string"
                        ],
                        [
                            "totalRewardsClaimed",
                            "uint64"
                        ]
                    ]
                }
            }
        },
        "donateTokens(uint64,uint64)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdrawExcessTokens(uint64,uint64)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "fundContract(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdrawExcessAlgo()void": {
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCA4IDEgMgogICAgYnl0ZWNibG9jayAweDAwMDE1ZiAic3Rha2VfIiAweDE1MWY3Yzc1MDAyMCAweDAwNWQgMHgxNTFmN2M3NQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozNwogICAgLy8gZXhwb3J0IGNsYXNzIEFsZ29TdGFrZVggZXh0ZW5kcyBDb250cmFjdCB7CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9fX2FsZ290c19fLmRlZmF1bHRDcmVhdGVAMTYKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0CiAgICBwdXNoYnl0ZXNzIDB4YTUwODIxMTkgMHhmNWQ4YTM0YiAweDg4MzRhZDdmIDB4OTFhZTI5MWUgMHg3MTQwOTZmOCAweDhkOGZkYWMyIDB4NzcyYjU1NzQgMHg1NWQ5NTI1YiAweDMwNjc2OTc4IC8vIG1ldGhvZCAic3Rha2Uoc3RyaW5nLHVpbnQ2NCxib29sLHVpbnQ2NCx1aW50NjQsc3RyaW5nLHVpbnQ2NCxzdHJpbmcpYnl0ZVtdIiwgbWV0aG9kICJ3aXRoZHJhdyhzdHJpbmcpYnl0ZVtdIiwgbWV0aG9kICJlbWVyZ2VuY3lXaXRoZHJhdyhzdHJpbmcsdWludDY0KWJ5dGVbXSIsIG1ldGhvZCAiaGFzVmFsaWRTdGFrZShzdHJpbmcsc3RyaW5nLHVpbnQ2NClib29sIiwgbWV0aG9kICJnZXRTdGFrZUluZm8oc3RyaW5nLHN0cmluZykoYWRkcmVzcyx1aW50NjQsYm9vbCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsc3RyaW5nLHVpbnQ2NCxzdHJpbmcsdWludDY0KSIsIG1ldGhvZCAiZG9uYXRlVG9rZW5zKHVpbnQ2NCx1aW50NjQpYnl0ZVtdIiwgbWV0aG9kICJ3aXRoZHJhd0V4Y2Vzc1Rva2Vucyh1aW50NjQsdWludDY0KWJ5dGVbXSIsIG1ldGhvZCAiZnVuZENvbnRyYWN0KHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJ3aXRoZHJhd0V4Y2Vzc0FsZ28oKXZvaWQiCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAwCiAgICBtYXRjaCBzdGFrZSB3aXRoZHJhdyBlbWVyZ2VuY3lXaXRoZHJhdyBoYXNWYWxpZFN0YWtlIGdldFN0YWtlSW5mbyBkb25hdGVUb2tlbnMgd2l0aGRyYXdFeGNlc3NUb2tlbnMgZnVuZENvbnRyYWN0IHdpdGhkcmF3RXhjZXNzQWxnbwogICAgZXJyCgptYWluX19fYWxnb3RzX18uZGVmYXVsdENyZWF0ZUAxNjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzcKICAgIC8vIGV4cG9ydCBjbGFzcyBBbGdvU3Rha2VYIGV4dGVuZHMgQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICEKICAgICYmCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIG11c3QgYmUgTm9PcCAmJiBjYW4gb25seSBjYWxsIHdoZW4gY3JlYXRpbmcKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLnN0YWtlW3JvdXRpbmddKCkgLT4gdm9pZDoKc3Rha2U6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ3CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgY292ZXIgMgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgZHVwCiAgICBjb3ZlciAzCiAgICBsZW4KICAgIGludGNfMiAvLyAxCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmJvb2wKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDQKICAgIGR1cAogICAgY292ZXIgMwogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgY292ZXIgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgZHVwCiAgICBjb3ZlciAzCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18xIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBjb3ZlciAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA2CiAgICBkdXAKICAgIGNvdmVyIDMKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICBkdXAKICAgIGNvdmVyIDUKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgZXh0cmFjdCAyIDAKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDcKICAgIGR1cAogICAgY292ZXIgNAogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgY292ZXIgMwogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgOAogICAgZHVwCiAgICBjb3ZlciA0CiAgICBkdXAKICAgIGludGNfMCAvLyAwCiAgICBleHRyYWN0X3VpbnQxNiAvLyBvbiBlcnJvcjogaW52YWxpZCBhcnJheSBsZW5ndGggaGVhZGVyCiAgICBpbnRjXzMgLy8gMgogICAgKwogICAgc3dhcAogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NjMKICAgIC8vIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIHVuY292ZXIgMgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo2MQogICAgLy8gY29uc3Qgc2VwYXJhdG9yID0gbmV3IGFyYzQuU3RyKCJfIikuYnl0ZXM7CiAgICBieXRlY18wIC8vIDB4MDAwMTVmCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjYzCiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NjQKICAgIC8vIFR4bi5zZW5kZXIuYnl0ZXMKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NjItNjUKICAgIC8vIGNvbnN0IHN0YWtlS2V5ID0gb3AuY29uY2F0KAogICAgLy8gICBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICAvLyAgIFR4bi5zZW5kZXIuYnl0ZXMKICAgIC8vICk7CiAgICBjb25jYXQKICAgIGNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6ODUtOTIKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogdG9rZW5JZCwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6ODcKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6ODkKICAgIC8vIGFzc2V0QW1vdW50OiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo4NS05MQogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgeGZlckFzc2V0OiB0b2tlbklkLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIHB1c2hpbnQgNCAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjkwCiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6ODUtOTIKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogdG9rZW5JZCwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjk0CiAgICAvLyBjb25zdCBjdXJyZW50VGltZSA9IEdsb2JhbC5sYXRlc3RUaW1lc3RhbXA7CiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICBzd2FwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjk4CiAgICAvLyBpZiAocmV3YXJkVHlwZSA9PT0gIkFQWSIpIHsKICAgIHB1c2hieXRlcyAiQVBZIgogICAgPT0KICAgIGJueiBzdGFrZV9hZnRlcl9pZl9lbHNlQDUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTAzCiAgICAvLyByZXdhcmRSYXRlID09PSBVaW50NjQoMCksCiAgICBkaWcgMwogICAgIQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMDItMTA1CiAgICAvLyBhc3NlcnQoCiAgICAvLyAgIHJld2FyZFJhdGUgPT09IFVpbnQ2NCgwKSwKICAgIC8vICAgInJld2FyZFJhdGUgbXVzdCBiZSAwIHdoZW4gcmV3YXJkVHlwZSBpcyBub3QgQVBZIgogICAgLy8gKTsKICAgIGFzc2VydCAvLyByZXdhcmRSYXRlIG11c3QgYmUgMCB3aGVuIHJld2FyZFR5cGUgaXMgbm90IEFQWQoKc3Rha2VfYWZ0ZXJfaWZfZWxzZUA1OgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozOQogICAgLy8gcHJpdmF0ZSBzdGFrZXMgPSBCb3hNYXA8Ynl0ZXMsIFN0YWtlRGF0YT4oeyBrZXlQcmVmaXg6ICJzdGFrZV8iIH0pOwogICAgYnl0ZWNfMSAvLyAic3Rha2VfIgogICAgZGlnIDIKICAgIGNvbmNhdAogICAgZHVwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEwOQogICAgLy8gaWYgKHRoaXMuc3Rha2VzKHN0YWtlS2V5KS5leGlzdHMpIHsKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgYnogc3Rha2VfZWxzZV9ib2R5QDcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTE0CiAgICAvLyBzdGFrZXI6IG5ldyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjExOAogICAgLy8gVWludDY0KGV4aXN0aW5nU3Rha2UuYW1vdW50LmFzVWludDY0KCkgKyBhbW91bnQpCiAgICBzd2FwCiAgICBkdXAKICAgIHB1c2hpbnQgNDEgLy8gNDEKICAgIGludGNfMSAvLyA4CiAgICBib3hfZXh0cmFjdAogICAgYnRvaQogICAgZGlnIDEyCiAgICArCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjExNy0xMTkKICAgIC8vIGFtb3VudDogbmV3IGFyYzQuVWludDY0KAogICAgLy8gICBVaW50NjQoZXhpc3RpbmdTdGFrZS5hbW91bnQuYXNVaW50NjQoKSArIGFtb3VudCkKICAgIC8vICksCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEyMAogICAgLy8gc3Rha2VkQXQ6IG5ldyBhcmM0LlVpbnQ2NChleGlzdGluZ1N0YWtlLnN0YWtlZEF0LmFzVWludDY0KCkpLCAvLyBLZWVwIG9yaWdpbmFsIHRpbWUKICAgIGRpZyAxCiAgICBwdXNoaW50IDQ5IC8vIDQ5CiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTIyCiAgICAvLyBsb2NrRW5kVGltZTogbmV3IGFyYzQuVWludDY0KFVpbnQ2NChjdXJyZW50VGltZSArIGxvY2tQZXJpb2QpKSwKICAgIGRpZyA0CiAgICBkaWcgMTIKICAgICsKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTI3CiAgICAvLyBleGlzdGluZ1N0YWtlLnRvdGFsUmV3YXJkc0NsYWltZWQuYXNVaW50NjQoKQogICAgZGlnIDMKICAgIHB1c2hpbnQgODUgLy8gODUKICAgIGludGNfMSAvLyA4CiAgICBib3hfZXh0cmFjdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMTMtMTI5CiAgICAvLyBjb25zdCB1cGRhdGVkU3Rha2UgPSBuZXcgU3Rha2VEYXRhKHsKICAgIC8vICAgc3Rha2VyOiBuZXcgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICB0b2tlbklkOiBuZXcgYXJjNC5VaW50NjQodG9rZW5JZCksCiAgICAvLyAgIGlzRmxleGlibGU6IG5ldyBhcmM0LkJvb2woaXNGbGV4aWJsZSksCiAgICAvLyAgIGFtb3VudDogbmV3IGFyYzQuVWludDY0KAogICAgLy8gICAgIFVpbnQ2NChleGlzdGluZ1N0YWtlLmFtb3VudC5hc1VpbnQ2NCgpICsgYW1vdW50KQogICAgLy8gICApLAogICAgLy8gICBzdGFrZWRBdDogbmV3IGFyYzQuVWludDY0KGV4aXN0aW5nU3Rha2Uuc3Rha2VkQXQuYXNVaW50NjQoKSksIC8vIEtlZXAgb3JpZ2luYWwgdGltZQogICAgLy8gICBsb2NrUGVyaW9kOiBuZXcgYXJjNC5VaW50NjQobG9ja1BlcmlvZCksCiAgICAvLyAgIGxvY2tFbmRUaW1lOiBuZXcgYXJjNC5VaW50NjQoVWludDY0KGN1cnJlbnRUaW1lICsgbG9ja1BlcmlvZCkpLAogICAgLy8gICByZXdhcmRUeXBlOiBuZXcgYXJjNC5TdHIocmV3YXJkVHlwZSksCiAgICAvLyAgIHJld2FyZFJhdGU6IG5ldyBhcmM0LlVpbnQ2NChyZXdhcmRSYXRlKSwKICAgIC8vICAgdXRpbGl0eTogbmV3IGFyYzQuU3RyKHV0aWxpdHkpLAogICAgLy8gICB0b3RhbFJld2FyZHNDbGFpbWVkOiBuZXcgYXJjNC5VaW50NjQoCiAgICAvLyAgICAgZXhpc3RpbmdTdGFrZS50b3RhbFJld2FyZHNDbGFpbWVkLmFzVWludDY0KCkKICAgIC8vICAgKSwKICAgIC8vIH0pOwogICAgdW5jb3ZlciA1CiAgICBkaWcgMTgKICAgIGNvbmNhdAogICAgZGlnIDE3CiAgICBjb25jYXQKICAgIHVuY292ZXIgNAogICAgY29uY2F0CiAgICB1bmNvdmVyIDMKICAgIGNvbmNhdAogICAgZGlnIDEyCiAgICBjb25jYXQKICAgIHVuY292ZXIgMgogICAgY29uY2F0CiAgICBieXRlY18zIC8vIDB4MDA1ZAogICAgY29uY2F0CiAgICBwdXNoaW50IDkzIC8vIDkzCiAgICBkaWcgOQogICAgKwogICAgc3dhcAogICAgZGlnIDgKICAgIGNvbmNhdAogICAgc3dhcAogICAgaXRvYgogICAgZXh0cmFjdCA2IDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBkaWcgOAogICAgY29uY2F0CiAgICBkaWcgNAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEzMQogICAgLy8gdGhpcy5zdGFrZXMoc3Rha2VLZXkpLnZhbHVlID0gY2xvbmUodXBkYXRlZFN0YWtlKTsKICAgIGRpZyAxCiAgICBib3hfZGVsCiAgICBwb3AKICAgIGJveF9wdXQKCnN0YWtlX2FmdGVyX2lmX2Vsc2VAODoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDcKICAgIC8vIEBhYmltZXRob2QoKQogICAgYnl0ZWNfMiAvLyAweDE1MWY3Yzc1MDAyMAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNTEKICAgIC8vIHJldHVybiBUeG4udHhJZDsKICAgIHR4biBUeElECiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ3CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgpzdGFrZV9lbHNlX2JvZHlANzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTM1CiAgICAvLyBzdGFrZXI6IG5ldyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEzOQogICAgLy8gc3Rha2VkQXQ6IG5ldyBhcmM0LlVpbnQ2NChjdXJyZW50VGltZSksCiAgICBkaWcgMgogICAgZHVwCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE0MQogICAgLy8gbG9ja0VuZFRpbWU6IG5ldyBhcmM0LlVpbnQ2NChVaW50NjQoY3VycmVudFRpbWUgKyBsb2NrUGVyaW9kKSksCiAgICBzd2FwCiAgICBkaWcgMTEKICAgICsKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTM0LTE0NgogICAgLy8gY29uc3QgbmV3U3Rha2UgPSBuZXcgU3Rha2VEYXRhKHsKICAgIC8vICAgc3Rha2VyOiBuZXcgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICB0b2tlbklkOiBuZXcgYXJjNC5VaW50NjQodG9rZW5JZCksCiAgICAvLyAgIGlzRmxleGlibGU6IG5ldyBhcmM0LkJvb2woaXNGbGV4aWJsZSksCiAgICAvLyAgIGFtb3VudDogbmV3IGFyYzQuVWludDY0KGFtb3VudCksCiAgICAvLyAgIHN0YWtlZEF0OiBuZXcgYXJjNC5VaW50NjQoY3VycmVudFRpbWUpLAogICAgLy8gICBsb2NrUGVyaW9kOiBuZXcgYXJjNC5VaW50NjQobG9ja1BlcmlvZCksCiAgICAvLyAgIGxvY2tFbmRUaW1lOiBuZXcgYXJjNC5VaW50NjQoVWludDY0KGN1cnJlbnRUaW1lICsgbG9ja1BlcmlvZCkpLAogICAgLy8gICByZXdhcmRUeXBlOiBuZXcgYXJjNC5TdHIocmV3YXJkVHlwZSksCiAgICAvLyAgIHJld2FyZFJhdGU6IG5ldyBhcmM0LlVpbnQ2NChyZXdhcmRSYXRlKSwKICAgIC8vICAgdXRpbGl0eTogbmV3IGFyYzQuU3RyKHV0aWxpdHkpLAogICAgLy8gICB0b3RhbFJld2FyZHNDbGFpbWVkOiBuZXcgYXJjNC5VaW50NjQoMCksCiAgICAvLyB9KTsKICAgIHVuY292ZXIgMgogICAgZGlnIDE2CiAgICBjb25jYXQKICAgIGRpZyAxNQogICAgY29uY2F0CiAgICBkaWcgMTQKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBjb25jYXQKICAgIGRpZyAxMQogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGJ5dGVjXzMgLy8gMHgwMDVkCiAgICBjb25jYXQKICAgIHB1c2hpbnQgOTMgLy8gOTMKICAgIGRpZyA4CiAgICArCiAgICBzd2FwCiAgICBkaWcgNwogICAgY29uY2F0CiAgICBzd2FwCiAgICBpdG9iCiAgICBleHRyYWN0IDYgMgogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE0NQogICAgLy8gdG90YWxSZXdhcmRzQ2xhaW1lZDogbmV3IGFyYzQuVWludDY0KDApLAogICAgcHVzaGJ5dGVzIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMzQtMTQ2CiAgICAvLyBjb25zdCBuZXdTdGFrZSA9IG5ldyBTdGFrZURhdGEoewogICAgLy8gICBzdGFrZXI6IG5ldyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgIHRva2VuSWQ6IG5ldyBhcmM0LlVpbnQ2NCh0b2tlbklkKSwKICAgIC8vICAgaXNGbGV4aWJsZTogbmV3IGFyYzQuQm9vbChpc0ZsZXhpYmxlKSwKICAgIC8vICAgYW1vdW50OiBuZXcgYXJjNC5VaW50NjQoYW1vdW50KSwKICAgIC8vICAgc3Rha2VkQXQ6IG5ldyBhcmM0LlVpbnQ2NChjdXJyZW50VGltZSksCiAgICAvLyAgIGxvY2tQZXJpb2Q6IG5ldyBhcmM0LlVpbnQ2NChsb2NrUGVyaW9kKSwKICAgIC8vICAgbG9ja0VuZFRpbWU6IG5ldyBhcmM0LlVpbnQ2NChVaW50NjQoY3VycmVudFRpbWUgKyBsb2NrUGVyaW9kKSksCiAgICAvLyAgIHJld2FyZFR5cGU6IG5ldyBhcmM0LlN0cihyZXdhcmRUeXBlKSwKICAgIC8vICAgcmV3YXJkUmF0ZTogbmV3IGFyYzQuVWludDY0KHJld2FyZFJhdGUpLAogICAgLy8gICB1dGlsaXR5OiBuZXcgYXJjNC5TdHIodXRpbGl0eSksCiAgICAvLyAgIHRvdGFsUmV3YXJkc0NsYWltZWQ6IG5ldyBhcmM0LlVpbnQ2NCgwKSwKICAgIC8vIH0pOwogICAgY29uY2F0CiAgICBkaWcgOAogICAgY29uY2F0CiAgICBkaWcgNAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE0OAogICAgLy8gdGhpcy5zdGFrZXMoc3Rha2VLZXkpLnZhbHVlID0gY2xvbmUobmV3U3Rha2UpOwogICAgc3dhcAogICAgZHVwCiAgICBib3hfZGVsCiAgICBwb3AKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIGIgc3Rha2VfYWZ0ZXJfaWZfZWxzZUA4CgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC53aXRoZHJhd1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3OgogICAgcHVzaGJ5dGVzICIiCiAgICBkdXAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTU3CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTYxCiAgICAvLyBjb25zdCBzZXBhcmF0b3IgPSBuZXcgYXJjNC5TdHIoIl8iKS5ieXRlczsKICAgIGJ5dGVjXzAgLy8gMHgwMDAxNWYKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTYzCiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTY0CiAgICAvLyBUeG4uc2VuZGVyLmJ5dGVzCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE2Mi0xNjUKICAgIC8vIGNvbnN0IHN0YWtlS2V5ID0gb3AuY29uY2F0KAogICAgLy8gICBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICAvLyAgIFR4bi5zZW5kZXIuYnl0ZXMKICAgIC8vICk7CiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzkKICAgIC8vIHByaXZhdGUgc3Rha2VzID0gQm94TWFwPGJ5dGVzLCBTdGFrZURhdGE+KHsga2V5UHJlZml4OiAic3Rha2VfIiB9KTsKICAgIGJ5dGVjXzEgLy8gInN0YWtlXyIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZHVwbiAyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE2OAogICAgLy8gYXNzZXJ0KHRoaXMuc3Rha2VzKHN0YWtlS2V5KS5leGlzdHMsICJObyBhY3RpdmUgc3Rha2UgZm91bmQiKTsKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgYXNzZXJ0IC8vIE5vIGFjdGl2ZSBzdGFrZSBmb3VuZAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNzMKICAgIC8vIGNvbnN0IGN1cnJlbnRTZW5kZXJBZGRyID0gbmV3IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKTsKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTc1CiAgICAvLyBzdGFrZURhdGEuc3Rha2VyLm5hdGl2ZSA9PT0gY3VycmVudFNlbmRlckFkZHIubmF0aXZlLAogICAgZGlnIDEKICAgIGludGNfMCAvLyAwCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICBib3hfZXh0cmFjdAogICAgPT0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTc0LTE3NwogICAgLy8gYXNzZXJ0KAogICAgLy8gICBzdGFrZURhdGEuc3Rha2VyLm5hdGl2ZSA9PT0gY3VycmVudFNlbmRlckFkZHIubmF0aXZlLAogICAgLy8gICAiTm90IHRoZSBzdGFrZXIiCiAgICAvLyApOwogICAgYXNzZXJ0IC8vIE5vdCB0aGUgc3Rha2VyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE3OQogICAgLy8gY29uc3QgY3VycmVudFRpbWUgPSBHbG9iYWwubGF0ZXN0VGltZXN0YW1wOwogICAgZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAogICAgc3dhcAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxODIKICAgIC8vIGlmICghc3Rha2VEYXRhLmlzRmxleGlibGUubmF0aXZlKSB7CiAgICBwdXNoaW50IDQwIC8vIDQwCiAgICBpbnRjXzIgLy8gMQogICAgYm94X2V4dHJhY3QKICAgIGludGNfMCAvLyAwCiAgICBnZXRiaXQKICAgIHB1c2hieXRlcyAweDAwCiAgICBpbnRjXzAgLy8gMAogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIGludGNfMCAvLyAwCiAgICBnZXRiaXQKICAgIGJueiB3aXRoZHJhd19hZnRlcl9pZl9lbHNlQDMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTg0CiAgICAvLyBjdXJyZW50VGltZSA+PSBzdGFrZURhdGEubG9ja0VuZFRpbWUuYXNVaW50NjQoKSwKICAgIGRpZyAxCiAgICBwdXNoaW50IDY1IC8vIDY1CiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIGJ0b2kKICAgIGRpZyAxCiAgICA8PQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxODMtMTg2CiAgICAvLyBhc3NlcnQoCiAgICAvLyAgIGN1cnJlbnRUaW1lID49IHN0YWtlRGF0YS5sb2NrRW5kVGltZS5hc1VpbnQ2NCgpLAogICAgLy8gICAiTG9jayBwZXJpb2Qgbm90IGVuZGVkIgogICAgLy8gKTsKICAgIGFzc2VydCAvLyBMb2NrIHBlcmlvZCBub3QgZW5kZWQKCndpdGhkcmF3X2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTkwCiAgICAvLyBjb25zdCB0aW1lU3Rha2VkID0gVWludDY0KGN1cnJlbnRUaW1lIC0gc3Rha2VEYXRhLnN0YWtlZEF0LmFzVWludDY0KCkpOwogICAgZGlnIDEKICAgIGR1cAogICAgcHVzaGludCA0OSAvLyA0OQogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICBidG9pCiAgICBkaWcgMgogICAgc3dhcAogICAgLQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxOTIKICAgIC8vIHN0YWtlRGF0YS5hbW91bnQuYXNVaW50NjQoKSwKICAgIGRpZyAxCiAgICBwdXNoaW50IDQxIC8vIDQxCiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTkzCiAgICAvLyBzdGFrZURhdGEucmV3YXJkUmF0ZS5hc1VpbnQ2NCgpLAogICAgZGlnIDIKICAgIHB1c2hpbnQgNzUgLy8gNzUKICAgIGludGNfMSAvLyA4CiAgICBib3hfZXh0cmFjdAogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozMzUKICAgIC8vIGFtb3VudCAqIHJld2FyZFJhdGVCYXNpc1BvaW50cyAqIHRpbWVTdGFrZWRTZWNvbmRzCiAgICBkaWcgMQogICAgKgogICAgdW5jb3ZlciAyCiAgICAqCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjMzOQogICAgLy8gcmV0dXJuIFVpbnQ2NChudW1lcmF0b3IgLyBkZW5vbWluYXRvcik7CiAgICBwdXNoaW50IDMxNTM2MDAwMDAwMCAvLyAzMTUzNjAwMDAwMDAKICAgIC8KICAgIGR1cAogICAgY292ZXIgMwogICAgYnVyeSA2CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE5OC0yMDYKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgICAgYXNzZXRTZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogc3Rha2VEYXRhLmFtb3VudC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMDAKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIwMQogICAgLy8gYXNzZXRTZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjAyCiAgICAvLyB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICB1bmNvdmVyIDMKICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgIGludGNfMSAvLyA4CiAgICBib3hfZXh0cmFjdAogICAgYnRvaQogICAgZHVwCiAgICBidXJ5IDkKICAgIHVuY292ZXIgMwogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRTZW5kZXIKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxOTgtMjA1CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHN0YWtlRGF0YS5hbW91bnQuYXNVaW50NjQoKSwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMDQKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxOTgtMjA2CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHN0YWtlRGF0YS5hbW91bnQuYXNVaW50NjQoKSwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIwOQogICAgLy8gaWYgKHJld2FyZHMgPiBVaW50NjQoMCkpIHsKICAgIGJ6IHdpdGhkcmF3X2FmdGVyX2lmX2Vsc2VANwogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMTAtMjE4CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHJld2FyZHMsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIxMgogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjEzCiAgICAvLyBhc3NldFNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgZGlnIDQKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGRpZyA1CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFNlbmRlcgogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIxMC0yMTcKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgICAgYXNzZXRTZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogcmV3YXJkcywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMTYKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMTAtMjE4CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHJld2FyZHMsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAoKd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUA3OgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMjIKICAgIC8vIHRoaXMuc3Rha2VzKHN0YWtlS2V5KS5kZWxldGUoKTsKICAgIGRpZyAxCiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTU3CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGJ5dGVjXzIgLy8gMHgxNTFmN2M3NTAwMjAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjI0CiAgICAvLyByZXR1cm4gVHhuLnR4SWQ7CiAgICB0eG4gVHhJRAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNTcKICAgIC8vIEBhYmltZXRob2QoKQogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmVtZXJnZW5jeVdpdGhkcmF3W3JvdXRpbmddKCkgLT4gdm9pZDoKZW1lcmdlbmN5V2l0aGRyYXc6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIzMAogICAgLy8gQGFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGludGNfMCAvLyAwCiAgICBleHRyYWN0X3VpbnQxNiAvLyBvbiBlcnJvcjogaW52YWxpZCBhcnJheSBsZW5ndGggaGVhZGVyCiAgICBpbnRjXzMgLy8gMgogICAgKwogICAgZGlnIDEKICAgIGxlbgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5keW5hbWljX2FycmF5PGFyYzQudWludDg+CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18xIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIzNQogICAgLy8gb3AuY29uY2F0KHBvb2xJZEJ5dGVzLCBzZXBhcmF0b3IpLAogICAgc3dhcAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMzMKICAgIC8vIGNvbnN0IHNlcGFyYXRvciA9IG5ldyBhcmM0LlN0cigiXyIpLmJ5dGVzOwogICAgYnl0ZWNfMCAvLyAweDAwMDE1ZgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMzUKICAgIC8vIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMzYKICAgIC8vIFR4bi5zZW5kZXIuYnl0ZXMKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjM0LTIzNwogICAgLy8gY29uc3Qgc3Rha2VLZXkgPSBvcC5jb25jYXQoCiAgICAvLyAgIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIC8vICAgVHhuLnNlbmRlci5ieXRlcwogICAgLy8gKTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozOQogICAgLy8gcHJpdmF0ZSBzdGFrZXMgPSBCb3hNYXA8Ynl0ZXMsIFN0YWtlRGF0YT4oeyBrZXlQcmVmaXg6ICJzdGFrZV8iIH0pOwogICAgYnl0ZWNfMSAvLyAic3Rha2VfIgogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIzOQogICAgLy8gYXNzZXJ0KHRoaXMuc3Rha2VzKHN0YWtlS2V5KS5leGlzdHMsICJObyBhY3RpdmUgc3Rha2UgZm91bmQiKTsKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gTm8gYWN0aXZlIHN0YWtlIGZvdW5kCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI0MwogICAgLy8gY29uc3QgY3VycmVudFNlbmRlckFkZHIgPSBuZXcgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpOwogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNDUKICAgIC8vIHN0YWtlRGF0YS5zdGFrZXIubmF0aXZlID09PSBjdXJyZW50U2VuZGVyQWRkci5uYXRpdmUsCiAgICBkaWcgMQogICAgaW50Y18wIC8vIDAKICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgIGJveF9leHRyYWN0CiAgICA9PQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNDQtMjQ3CiAgICAvLyBhc3NlcnQoCiAgICAvLyAgIHN0YWtlRGF0YS5zdGFrZXIubmF0aXZlID09PSBjdXJyZW50U2VuZGVyQWRkci5uYXRpdmUsCiAgICAvLyAgICJOb3QgdGhlIHN0YWtlciIKICAgIC8vICk7CiAgICBhc3NlcnQgLy8gTm90IHRoZSBzdGFrZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjUxCiAgICAvLyAoc3Rha2VEYXRhLmFtb3VudC5hc1VpbnQ2NCgpICogcGVuYWx0eVBlcmNlbnRhZ2UpIC8gQkFTSVNfUE9JTlRTX0RJVklTT1IKICAgIGR1cAogICAgcHVzaGludCA0MSAvLyA0MQogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICBidG9pCiAgICBkdXAKICAgIHVuY292ZXIgMwogICAgKgogICAgcHVzaGludCAxMDAwMCAvLyAxMDAwMAogICAgLwogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNTMKICAgIC8vIGNvbnN0IGFtb3VudFRvUmV0dXJuID0gVWludDY0KHN0YWtlRGF0YS5hbW91bnQuYXNVaW50NjQoKSAtIHBlbmFsdHkpOwogICAgLQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNTYtMjY0CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudFRvUmV0dXJuLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNTgKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI1OQogICAgLy8gYXNzZXRTZW5kZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjYwCiAgICAvLyB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICBkaWcgMwogICAgcHVzaGludCAzMiAvLyAzMgogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICBidG9pCiAgICB1bmNvdmVyIDMKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0U2VuZGVyCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjU2LTI2MwogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICBhc3NldFNlbmRlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgeGZlckFzc2V0OiBzdGFrZURhdGEudG9rZW5JZC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBhbW91bnRUb1JldHVybiwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNjIKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNTYtMjY0CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudFRvUmV0dXJuLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjY3CiAgICAvLyB0aGlzLnN0YWtlcyhzdGFrZUtleSkuZGVsZXRlKCk7CiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjMwCiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGJ5dGVjXzIgLy8gMHgxNTFmN2M3NTAwMjAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjY5CiAgICAvLyByZXR1cm4gVHhuLnR4SWQ7CiAgICB0eG4gVHhJRAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMzAKICAgIC8vIEBhYmltZXRob2QoKQogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmhhc1ZhbGlkU3Rha2Vbcm91dGluZ10oKSAtPiB2b2lkOgpoYXNWYWxpZFN0YWtlOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNzUKICAgIC8vIEBhYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18zIC8vIDIKICAgICsKICAgIGRpZyAxCiAgICBsZW4KICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18zIC8vIDIKICAgICsKICAgIGRpZyAxCiAgICBsZW4KICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgY292ZXIgMgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyODYKICAgIC8vIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIHN3YXAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjgzCiAgICAvLyBjb25zdCBzZXBhcmF0b3IgPSBuZXcgYXJjNC5TdHIoIl8iKS5ieXRlczsKICAgIGJ5dGVjXzAgLy8gMHgwMDAxNWYKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6Mjg2CiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6Mjg1LTI4OAogICAgLy8gY29uc3Qgc3Rha2VLZXkgPSBvcC5jb25jYXQoCiAgICAvLyAgIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIC8vICAgdXNlckFkZHJCeXRlcwogICAgLy8gKTsKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozOQogICAgLy8gcHJpdmF0ZSBzdGFrZXMgPSBCb3hNYXA8Ynl0ZXMsIFN0YWtlRGF0YT4oeyBrZXlQcmVmaXg6ICJzdGFrZV8iIH0pOwogICAgYnl0ZWNfMSAvLyAic3Rha2VfIgogICAgc3dhcAogICAgY29uY2F0CiAgICBkdXAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjkwCiAgICAvLyBpZiAoIXRoaXMuc3Rha2VzKHN0YWtlS2V5KS5leGlzdHMpIHsKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgYm56IGhhc1ZhbGlkU3Rha2VfYWZ0ZXJfaWZfZWxzZUAzCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI5MQogICAgLy8gcmV0dXJuIGZhbHNlOwogICAgaW50Y18wIC8vIDAKCmhhc1ZhbGlkU3Rha2VfYWZ0ZXJfaW5saW5lZF9zbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmhhc1ZhbGlkU3Rha2VANjoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6Mjc1CiAgICAvLyBAYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHB1c2hieXRlcyAweDAwCiAgICBpbnRjXzAgLy8gMAogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIGJ5dGVjIDQgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCmhhc1ZhbGlkU3Rha2VfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyOTcKICAgIC8vIGlmIChzdGFrZURhdGEuYW1vdW50LmFzVWludDY0KCkgPCBtaW5pbXVtQW1vdW50KSB7CiAgICBkdXAKICAgIHB1c2hpbnQgNDEgLy8gNDEKICAgIGludGNfMSAvLyA4CiAgICBib3hfZXh0cmFjdAogICAgYnRvaQogICAgZGlnIDIKICAgIDwKICAgIGJ6IGhhc1ZhbGlkU3Rha2VfYWZ0ZXJfaWZfZWxzZUA1CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI5OAogICAgLy8gcmV0dXJuIGZhbHNlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6Mjc1CiAgICAvLyBAYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGIgaGFzVmFsaWRTdGFrZV9hZnRlcl9pbmxpbmVkX3NtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OkFsZ29TdGFrZVguaGFzVmFsaWRTdGFrZUA2CgpoYXNWYWxpZFN0YWtlX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzAxCiAgICAvLyByZXR1cm4gdHJ1ZTsKICAgIGludGNfMiAvLyAxCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI3NQogICAgLy8gQGFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBiIGhhc1ZhbGlkU3Rha2VfYWZ0ZXJfaW5saW5lZF9zbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmhhc1ZhbGlkU3Rha2VANgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OkFsZ29TdGFrZVguZ2V0U3Rha2VJbmZvW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0U3Rha2VJbmZvOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozMDcKICAgIC8vIEBhYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18zIC8vIDIKICAgICsKICAgIGRpZyAxCiAgICBsZW4KICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18zIC8vIDIKICAgICsKICAgIGRpZyAxCiAgICBsZW4KICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozMTMKICAgIC8vIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIHN3YXAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzEwCiAgICAvLyBjb25zdCBzZXBhcmF0b3IgPSBuZXcgYXJjNC5TdHIoIl8iKS5ieXRlczsKICAgIGJ5dGVjXzAgLy8gMHgwMDAxNWYKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzEzCiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzEyLTMxNQogICAgLy8gY29uc3Qgc3Rha2VLZXkgPSBvcC5jb25jYXQoCiAgICAvLyAgIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIC8vICAgdXNlckFkZHJCeXRlcwogICAgLy8gKTsKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozOQogICAgLy8gcHJpdmF0ZSBzdGFrZXMgPSBCb3hNYXA8Ynl0ZXMsIFN0YWtlRGF0YT4oeyBrZXlQcmVmaXg6ICJzdGFrZV8iIH0pOwogICAgYnl0ZWNfMSAvLyAic3Rha2VfIgogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjMxNwogICAgLy8gYXNzZXJ0KHRoaXMuc3Rha2VzKHN0YWtlS2V5KS5leGlzdHMsICJObyBzdGFrZSBmb3VuZCIpOwogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGFzc2VydCAvLyBObyBzdGFrZSBmb3VuZAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozMTkKICAgIC8vIHJldHVybiBjbG9uZSh0aGlzLnN0YWtlcyhzdGFrZUtleSkudmFsdWUpOwogICAgYm94X2dldAogICAgcG9wCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjMwNwogICAgLy8gQGFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBieXRlYyA0IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC5kb25hdGVUb2tlbnNbcm91dGluZ10oKSAtPiB2b2lkOgpkb25hdGVUb2tlbnM6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQyNAogICAgLy8gQGFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18xIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NDEtNDQ4CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ0MwogICAgLy8gYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NDUKICAgIC8vIGFzc2V0QW1vdW50OiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDQxLTQ0NwogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgeGZlckFzc2V0OiB0b2tlbklkLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIHB1c2hpbnQgNCAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ0NgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ0MS00NDgKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogdG9rZW5JZCwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQyNAogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBieXRlY18yIC8vIDB4MTUxZjdjNzUwMDIwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ1MAogICAgLy8gcmV0dXJuIFR4bi50eElkOwogICAgdHhuIFR4SUQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDI0CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC53aXRoZHJhd0V4Y2Vzc1Rva2Vuc1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3RXhjZXNzVG9rZW5zOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NTcKICAgIC8vIEBhYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NjEKICAgIC8vIFR4bi5zZW5kZXIgPT09IEdsb2JhbC5jcmVhdG9yQWRkcmVzcywKICAgIHR4biBTZW5kZXIKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgPT0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDYwLTQ2MwogICAgLy8gYXNzZXJ0KAogICAgLy8gICBUeG4uc2VuZGVyID09PSBHbG9iYWwuY3JlYXRvckFkZHJlc3MsCiAgICAvLyAgICJPbmx5IGFkbWluIGNhbiB3aXRoZHJhdyBleGNlc3MiCiAgICAvLyApOwogICAgYXNzZXJ0IC8vIE9ubHkgYWRtaW4gY2FuIHdpdGhkcmF3IGV4Y2VzcwogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NjctNDc1CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDY5CiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NzAKICAgIC8vIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRTZW5kZXIKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NjctNDc0CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NzMKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NjctNDc1CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGFzc2V0U2VuZGVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ1NwogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBieXRlY18yIC8vIDB4MTUxZjdjNzUwMDIwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ3NwogICAgLy8gcmV0dXJuIFR4bi50eElkOwogICAgdHhuIFR4SUQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDU3CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC5mdW5kQ29udHJhY3Rbcm91dGluZ10oKSAtPiB2b2lkOgpmdW5kQ29udHJhY3Q6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ4MwogICAgLy8gQGFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18xIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ4NgogICAgLy8gVHhuLnNlbmRlciA9PT0gR2xvYmFsLmNyZWF0b3JBZGRyZXNzLAogICAgdHhuIFNlbmRlcgogICAgZ2xvYmFsIENyZWF0b3JBZGRyZXNzCiAgICA9PQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0ODUtNDg4CiAgICAvLyBhc3NlcnQoCiAgICAvLyAgIFR4bi5zZW5kZXIgPT09IEdsb2JhbC5jcmVhdG9yQWRkcmVzcywKICAgIC8vICAgIk9ubHkgYWRtaW4gY2FuIGZ1bmQgdGhlIGNvbnRyYWN0IgogICAgLy8gKTsKICAgIGFzc2VydCAvLyBPbmx5IGFkbWluIGNhbiBmdW5kIHRoZSBjb250cmFjdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0OTAtNDk2CiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICBhbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICByZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ5MwogICAgLy8gcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ5MC00OTUKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIGFtb3VudDogYW1vdW50LAogICAgLy8gICAgIHJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzIgLy8gMQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0OTQKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0OTAtNDk2CiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICBhbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICByZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0ODMKICAgIC8vIEBhYmltZXRob2QoKQogICAgaW50Y18yIC8vIDEKICAgIHJldHVybgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OkFsZ29TdGFrZVgud2l0aGRyYXdFeGNlc3NBbGdvW3JvdXRpbmddKCkgLT4gdm9pZDoKd2l0aGRyYXdFeGNlc3NBbGdvOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo1MDUKICAgIC8vIFR4bi5zZW5kZXIgPT09IEdsb2JhbC5jcmVhdG9yQWRkcmVzcywKICAgIHR4biBTZW5kZXIKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgPT0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NTA0LTUwNwogICAgLy8gYXNzZXJ0KAogICAgLy8gICBUeG4uc2VuZGVyID09PSBHbG9iYWwuY3JlYXRvckFkZHJlc3MsCiAgICAvLyAgICJPbmx5IGFkbWluIGNhbiB3aXRoZHJhdyBmdW5kcyIKICAgIC8vICk7CiAgICBhc3NlcnQgLy8gT25seSBhZG1pbiBjYW4gd2l0aGRyYXcgZnVuZHMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NTEwCiAgICAvLyBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcy5iYWxhbmNlIC0gTUlOX0JBTEFOQ0UKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBhY2N0X3BhcmFtc19nZXQgQWNjdEJhbGFuY2UKICAgIGFzc2VydCAvLyBhY2NvdW50IGZ1bmRlZAogICAgcHVzaGludCAxMDAwMDAgLy8gMTAwMDAwCiAgICAtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjUxMwogICAgLy8gYXNzZXJ0KGFtb3VudFRvV2l0aGRyYXcgPiBVaW50NjQoMCksICJObyBleGNlc3MgYmFsYW5jZSB0byB3aXRoZHJhdyIpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm8gZXhjZXNzIGJhbGFuY2UgdG8gd2l0aGRyYXcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NTE1LTUyMQogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgYW1vdW50OiBhbW91bnRUb1dpdGhkcmF3LAogICAgLy8gICAgIHJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo1MTgKICAgIC8vIHJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NTE1LTUyMAogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgYW1vdW50OiBhbW91bnRUb1dpdGhkcmF3LAogICAgLy8gICAgIHJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIGludGNfMiAvLyAxCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjUxOQogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjUxNS01MjEKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIGFtb3VudDogYW1vdW50VG9XaXRoZHJhdywKICAgIC8vICAgICByZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjUwMgogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCg==",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 0,
            "num_uints": 0
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 0
        }
    },
    "schema": {
        "global": {
            "declared": {},
            "reserved": {}
        },
        "local": {
            "declared": {},
            "reserved": {}
        }
    },
    "contract": {
        "name": "AlgoStakeX",
        "methods": [
            {
                "name": "stake",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "uint64",
                        "name": "tokenId"
                    },
                    {
                        "type": "bool",
                        "name": "isFlexible"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    },
                    {
                        "type": "uint64",
                        "name": "lockPeriod"
                    },
                    {
                        "type": "string",
                        "name": "rewardType"
                    },
                    {
                        "type": "uint64",
                        "name": "rewardRate"
                    },
                    {
                        "type": "string",
                        "name": "utility"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Stake tokens into a pool\nTransaction group expected:\n[0] App call: stake\n[1] Asset transfer: User \u2192 Contract"
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Withdraw staked tokens with rewards"
            },
            {
                "name": "emergencyWithdraw",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "uint64",
                        "name": "penaltyPercentage"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Emergency withdraw with penalty (user loses rewards and pays penalty)"
            },
            {
                "name": "hasValidStake",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "string",
                        "name": "userAddress"
                    },
                    {
                        "type": "uint64",
                        "name": "minimumAmount"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "bool"
                },
                "desc": "Check if user has valid stake (for access control)"
            },
            {
                "name": "getStakeInfo",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "string",
                        "name": "userAddress"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "(address,uint64,bool,uint64,uint64,uint64,uint64,string,uint64,string,uint64)"
                },
                "desc": "Get stake information for a user"
            },
            {
                "name": "donateTokens",
                "args": [
                    {
                        "type": "uint64",
                        "name": "tokenId"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Donate tokens to contract (no staking)\nTransaction group:\n[0] App call: donateTokens\n[1] Asset transfer: User \u2192 Contract"
            },
            {
                "name": "withdrawExcessTokens",
                "args": [
                    {
                        "type": "uint64",
                        "name": "tokenId"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Withdraw excess tokens from contract (admin only)\nOnly withdraws tokens that are NOT currently staked"
            },
            {
                "name": "fundContract",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Fund contract with ALGO for MBR"
            },
            {
                "name": "withdrawExcessAlgo",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Withdraw excess ALGO from contract"
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "no_op": "CREATE"
    }
}