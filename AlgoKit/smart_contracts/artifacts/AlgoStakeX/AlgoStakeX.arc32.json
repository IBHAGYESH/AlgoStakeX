{
    "hints": {
        "stake(string,uint64,bool,uint64,uint64,string,uint64,string)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(string)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "emergencyWithdraw(string,uint64,address)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "hasValidStake(string,string,uint64)bool": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getStakeInfo(string,string)(address,uint64,bool,uint64,uint64,uint64,uint64,string,uint64,string)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            },
            "structs": {
                "output": {
                    "name": "StakeData",
                    "elements": [
                        [
                            "staker",
                            "address"
                        ],
                        [
                            "tokenId",
                            "uint64"
                        ],
                        [
                            "isFlexible",
                            "bool"
                        ],
                        [
                            "amount",
                            "uint64"
                        ],
                        [
                            "stakedAt",
                            "uint64"
                        ],
                        [
                            "lockPeriod",
                            "uint64"
                        ],
                        [
                            "lockEndTime",
                            "uint64"
                        ],
                        [
                            "rewardType",
                            "string"
                        ],
                        [
                            "rewardRate",
                            "uint64"
                        ],
                        [
                            "utility",
                            "string"
                        ]
                    ]
                }
            }
        },
        "donateTokens(uint64,uint64)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdrawExcessTokens(uint64,uint64)byte[]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "fundContract(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdrawExcessAlgo()void": {
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCA4IDEgMgogICAgYnl0ZWNibG9jayAweDAwMDE1ZiAic3Rha2VfIiAweDE1MWY3Yzc1MDAyMCAweDAwNTUgMHgxNTFmN2M3NQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozNgogICAgLy8gZXhwb3J0IGNsYXNzIEFsZ29TdGFrZVggZXh0ZW5kcyBDb250cmFjdCB7CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9fX2FsZ290c19fLmRlZmF1bHRDcmVhdGVAMTYKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0CiAgICBwdXNoYnl0ZXNzIDB4YTUwODIxMTkgMHhmNWQ4YTM0YiAweGVhMDBiZmZmIDB4OTFhZTI5MWUgMHhlZjcyM2M4ZCAweDhkOGZkYWMyIDB4NzcyYjU1NzQgMHg1NWQ5NTI1YiAweDMwNjc2OTc4IC8vIG1ldGhvZCAic3Rha2Uoc3RyaW5nLHVpbnQ2NCxib29sLHVpbnQ2NCx1aW50NjQsc3RyaW5nLHVpbnQ2NCxzdHJpbmcpYnl0ZVtdIiwgbWV0aG9kICJ3aXRoZHJhdyhzdHJpbmcpYnl0ZVtdIiwgbWV0aG9kICJlbWVyZ2VuY3lXaXRoZHJhdyhzdHJpbmcsdWludDY0LGFkZHJlc3MpYnl0ZVtdIiwgbWV0aG9kICJoYXNWYWxpZFN0YWtlKHN0cmluZyxzdHJpbmcsdWludDY0KWJvb2wiLCBtZXRob2QgImdldFN0YWtlSW5mbyhzdHJpbmcsc3RyaW5nKShhZGRyZXNzLHVpbnQ2NCxib29sLHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCxzdHJpbmcsdWludDY0LHN0cmluZykiLCBtZXRob2QgImRvbmF0ZVRva2Vucyh1aW50NjQsdWludDY0KWJ5dGVbXSIsIG1ldGhvZCAid2l0aGRyYXdFeGNlc3NUb2tlbnModWludDY0LHVpbnQ2NClieXRlW10iLCBtZXRob2QgImZ1bmRDb250cmFjdCh1aW50NjQpdm9pZCIsIG1ldGhvZCAid2l0aGRyYXdFeGNlc3NBbGdvKCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggc3Rha2Ugd2l0aGRyYXcgZW1lcmdlbmN5V2l0aGRyYXcgaGFzVmFsaWRTdGFrZSBnZXRTdGFrZUluZm8gZG9uYXRlVG9rZW5zIHdpdGhkcmF3RXhjZXNzVG9rZW5zIGZ1bmRDb250cmFjdCB3aXRoZHJhd0V4Y2Vzc0FsZ28KICAgIGVycgoKbWFpbl9fX2FsZ290c19fLmRlZmF1bHRDcmVhdGVAMTY6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjM2CiAgICAvLyBleHBvcnQgY2xhc3MgQWxnb1N0YWtlWCBleHRlbmRzIENvbnRyYWN0IHsKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAhCiAgICAmJgogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AgJiYgY2FuIG9ubHkgY2FsbCB3aGVuIGNyZWF0aW5nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC5zdGFrZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CnN0YWtlOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NgogICAgLy8gQGFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGludGNfMCAvLyAwCiAgICBleHRyYWN0X3VpbnQxNiAvLyBvbiBlcnJvcjogaW52YWxpZCBhcnJheSBsZW5ndGggaGVhZGVyCiAgICBpbnRjXzMgLy8gMgogICAgKwogICAgZGlnIDEKICAgIGxlbgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5keW5hbWljX2FycmF5PGFyYzQudWludDg+CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIGR1cAogICAgY292ZXIgMwogICAgbGVuCiAgICBpbnRjXzIgLy8gMQogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5ib29sCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA0CiAgICBkdXAKICAgIGNvdmVyIDMKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGNvdmVyIDIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDUKICAgIGR1cAogICAgY292ZXIgMwogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgY292ZXIgMgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgogICAgZHVwCiAgICBjb3ZlciAzCiAgICBkdXAKICAgIGludGNfMCAvLyAwCiAgICBleHRyYWN0X3VpbnQxNiAvLyBvbiBlcnJvcjogaW52YWxpZCBhcnJheSBsZW5ndGggaGVhZGVyCiAgICBpbnRjXzMgLy8gMgogICAgKwogICAgZGlnIDEKICAgIGxlbgogICAgZHVwCiAgICBjb3ZlciA1CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIGV4dHJhY3QgMiAwCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA3CiAgICBkdXAKICAgIGNvdmVyIDQKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGNvdmVyIDMKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDgKICAgIGR1cAogICAgY292ZXIgNAogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18zIC8vIDIKICAgICsKICAgIHN3YXAKICAgIGxlbgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5keW5hbWljX2FycmF5PGFyYzQudWludDg+CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjYyCiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICB1bmNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NjAKICAgIC8vIGNvbnN0IHNlcGFyYXRvciA9IG5ldyBhcmM0LlN0cigiXyIpLmJ5dGVzOwogICAgYnl0ZWNfMCAvLyAweDAwMDE1ZgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo2MgogICAgLy8gb3AuY29uY2F0KHBvb2xJZEJ5dGVzLCBzZXBhcmF0b3IpLAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjYzCiAgICAvLyBUeG4uc2VuZGVyLmJ5dGVzCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjYxLTY0CiAgICAvLyBjb25zdCBzdGFrZUtleSA9IG9wLmNvbmNhdCgKICAgIC8vICAgb3AuY29uY2F0KHBvb2xJZEJ5dGVzLCBzZXBhcmF0b3IpLAogICAgLy8gICBUeG4uc2VuZGVyLmJ5dGVzCiAgICAvLyApOwogICAgY29uY2F0CiAgICBjb3ZlciAyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjY3LTc0CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjY5CiAgICAvLyBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjcxCiAgICAvLyBhc3NldEFtb3VudDogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NjctNzMKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogdG9rZW5JZCwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo3MgogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjY3LTc0CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo3NgogICAgLy8gY29uc3QgY3VycmVudFRpbWUgPSBHbG9iYWwubGF0ZXN0VGltZXN0YW1wOwogICAgZ2xvYmFsIExhdGVzdFRpbWVzdGFtcAogICAgc3dhcAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo4MAogICAgLy8gaWYgKHJld2FyZFR5cGUgPT09ICJBUFkiKSB7CiAgICBwdXNoYnl0ZXMgIkFQWSIKICAgID09CiAgICBibnogc3Rha2VfYWZ0ZXJfaWZfZWxzZUA1CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjg1CiAgICAvLyByZXdhcmRSYXRlID09PSBVaW50NjQoMCksCiAgICBkaWcgMwogICAgIQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo4NC04NwogICAgLy8gYXNzZXJ0KAogICAgLy8gICByZXdhcmRSYXRlID09PSBVaW50NjQoMCksCiAgICAvLyAgICJyZXdhcmRSYXRlIG11c3QgYmUgMCB3aGVuIHJld2FyZFR5cGUgaXMgbm90IEFQWSIKICAgIC8vICk7CiAgICBhc3NlcnQgLy8gcmV3YXJkUmF0ZSBtdXN0IGJlIDAgd2hlbiByZXdhcmRUeXBlIGlzIG5vdCBBUFkKCnN0YWtlX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzgKICAgIC8vIHByaXZhdGUgc3Rha2VzID0gQm94TWFwPGJ5dGVzLCBTdGFrZURhdGE+KHsga2V5UHJlZml4OiAic3Rha2VfIiB9KTsKICAgIGJ5dGVjXzEgLy8gInN0YWtlXyIKICAgIGRpZyAyCiAgICBjb25jYXQKICAgIGR1cAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo5MQogICAgLy8gaWYgKHRoaXMuc3Rha2VzKHN0YWtlS2V5KS5leGlzdHMpIHsKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgYnogc3Rha2VfZWxzZV9ib2R5QDcKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OTcKICAgIC8vIHN0YWtlcjogbmV3IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OTgKICAgIC8vIHRva2VuSWQ6IG5ldyBhcmM0LlVpbnQ2NChleGlzdGluZ1N0YWtlLnRva2VuSWQuYXNVaW50NjQoKSksIC8vIGtlZXAgb3JpZ2luYWwgdG9rZW4gaWQKICAgIHN3YXAKICAgIGR1cAogICAgcHVzaGludCAzMiAvLyAzMgogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEwMQogICAgLy8gVWludDY0KGV4aXN0aW5nU3Rha2UuYW1vdW50LmFzVWludDY0KCkgKyBhbW91bnQpCiAgICBkaWcgMQogICAgcHVzaGludCA0MSAvLyA0MQogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICBidG9pCiAgICBkaWcgMTMKICAgICsKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTAwLTEwMgogICAgLy8gYW1vdW50OiBuZXcgYXJjNC5VaW50NjQoCiAgICAvLyAgIFVpbnQ2NChleGlzdGluZ1N0YWtlLmFtb3VudC5hc1VpbnQ2NCgpICsgYW1vdW50KQogICAgLy8gKSwgLy8gY3VycmVudCBhbW91bnQgKyBuZXcgYW1vdW50CiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEwMwogICAgLy8gc3Rha2VkQXQ6IG5ldyBhcmM0LlVpbnQ2NChleGlzdGluZ1N0YWtlLnN0YWtlZEF0LmFzVWludDY0KCkpLCAvLyBLZWVwIG9yaWdpbmFsIHRpbWUKICAgIGRpZyAyCiAgICBwdXNoaW50IDQ5IC8vIDQ5CiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTA1CiAgICAvLyBsb2NrRW5kVGltZTogbmV3IGFyYzQuVWludDY0KFVpbnQ2NChjdXJyZW50VGltZSArIGxvY2tQZXJpb2QpKSwgLy8gY3VycmVudCBsb2NrIGVuZCB0aW1lCiAgICBkaWcgNQogICAgZGlnIDEzCiAgICArCiAgICBpdG9iCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjk2LTEwOQogICAgLy8gY29uc3QgdXBkYXRlZFN0YWtlID0gbmV3IFN0YWtlRGF0YSh7CiAgICAvLyAgIHN0YWtlcjogbmV3IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgdG9rZW5JZDogbmV3IGFyYzQuVWludDY0KGV4aXN0aW5nU3Rha2UudG9rZW5JZC5hc1VpbnQ2NCgpKSwgLy8ga2VlcCBvcmlnaW5hbCB0b2tlbiBpZAogICAgLy8gICBpc0ZsZXhpYmxlOiBuZXcgYXJjNC5Cb29sKGlzRmxleGlibGUpLCAvLyBjdXJyZW50IHN0YWtpbmcgdHlwZQogICAgLy8gICBhbW91bnQ6IG5ldyBhcmM0LlVpbnQ2NCgKICAgIC8vICAgICBVaW50NjQoZXhpc3RpbmdTdGFrZS5hbW91bnQuYXNVaW50NjQoKSArIGFtb3VudCkKICAgIC8vICAgKSwgLy8gY3VycmVudCBhbW91bnQgKyBuZXcgYW1vdW50CiAgICAvLyAgIHN0YWtlZEF0OiBuZXcgYXJjNC5VaW50NjQoZXhpc3RpbmdTdGFrZS5zdGFrZWRBdC5hc1VpbnQ2NCgpKSwgLy8gS2VlcCBvcmlnaW5hbCB0aW1lCiAgICAvLyAgIGxvY2tQZXJpb2Q6IG5ldyBhcmM0LlVpbnQ2NChsb2NrUGVyaW9kKSwgLy8gY3VycmVudCBsb2NrIHBlcmlvZAogICAgLy8gICBsb2NrRW5kVGltZTogbmV3IGFyYzQuVWludDY0KFVpbnQ2NChjdXJyZW50VGltZSArIGxvY2tQZXJpb2QpKSwgLy8gY3VycmVudCBsb2NrIGVuZCB0aW1lCiAgICAvLyAgIHJld2FyZFR5cGU6IG5ldyBhcmM0LlN0cihyZXdhcmRUeXBlKSwgLy8gY3VycmVudCByZXdhcmQgdHlwZQogICAgLy8gICByZXdhcmRSYXRlOiBuZXcgYXJjNC5VaW50NjQocmV3YXJkUmF0ZSksIC8vIGN1cnJlbnQgcmV3YXJkIHJhdGUKICAgIC8vICAgdXRpbGl0eTogbmV3IGFyYzQuU3RyKHV0aWxpdHkpLCAvLyBjdXJyZW50IHV0aWxpdHkKICAgIC8vIH0pOwogICAgdW5jb3ZlciA1CiAgICB1bmNvdmVyIDQKICAgIGNvbmNhdAogICAgZGlnIDE2CiAgICBjb25jYXQKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgZGlnIDExCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgYnl0ZWNfMyAvLyAweDAwNTUKICAgIGNvbmNhdAogICAgcHVzaGludCA4NSAvLyA4NQogICAgZGlnIDgKICAgICsKICAgIHN3YXAKICAgIGRpZyA3CiAgICBjb25jYXQKICAgIHN3YXAKICAgIGl0b2IKICAgIGV4dHJhY3QgNiAyCiAgICBjb25jYXQKICAgIGRpZyA4CiAgICBjb25jYXQKICAgIGRpZyA0CiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTExCiAgICAvLyB0aGlzLnN0YWtlcyhzdGFrZUtleSkudmFsdWUgPSBjbG9uZSh1cGRhdGVkU3Rha2UpOwogICAgZGlnIDEKICAgIGJveF9kZWwKICAgIHBvcAogICAgYm94X3B1dAoKc3Rha2VfYWZ0ZXJfaWZfZWxzZUA4OgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NgogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBieXRlY18yIC8vIDB4MTUxZjdjNzUwMDIwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEzMAogICAgLy8gcmV0dXJuIFR4bi50eElkOwogICAgdHhuIFR4SUQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDYKICAgIC8vIEBhYmltZXRob2QoKQogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCnN0YWtlX2Vsc2VfYm9keUA3OgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMTUKICAgIC8vIHN0YWtlcjogbmV3IGFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTE5CiAgICAvLyBzdGFrZWRBdDogbmV3IGFyYzQuVWludDY0KGN1cnJlbnRUaW1lKSwKICAgIGRpZyAyCiAgICBkdXAKICAgIGl0b2IKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTIxCiAgICAvLyBsb2NrRW5kVGltZTogbmV3IGFyYzQuVWludDY0KFVpbnQ2NChjdXJyZW50VGltZSArIGxvY2tQZXJpb2QpKSwKICAgIHN3YXAKICAgIGRpZyAxMQogICAgKwogICAgaXRvYgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMTQtMTI1CiAgICAvLyBjb25zdCBuZXdTdGFrZSA9IG5ldyBTdGFrZURhdGEoewogICAgLy8gICBzdGFrZXI6IG5ldyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgIHRva2VuSWQ6IG5ldyBhcmM0LlVpbnQ2NCh0b2tlbklkKSwKICAgIC8vICAgaXNGbGV4aWJsZTogbmV3IGFyYzQuQm9vbChpc0ZsZXhpYmxlKSwKICAgIC8vICAgYW1vdW50OiBuZXcgYXJjNC5VaW50NjQoYW1vdW50KSwKICAgIC8vICAgc3Rha2VkQXQ6IG5ldyBhcmM0LlVpbnQ2NChjdXJyZW50VGltZSksCiAgICAvLyAgIGxvY2tQZXJpb2Q6IG5ldyBhcmM0LlVpbnQ2NChsb2NrUGVyaW9kKSwKICAgIC8vICAgbG9ja0VuZFRpbWU6IG5ldyBhcmM0LlVpbnQ2NChVaW50NjQoY3VycmVudFRpbWUgKyBsb2NrUGVyaW9kKSksCiAgICAvLyAgIHJld2FyZFR5cGU6IG5ldyBhcmM0LlN0cihyZXdhcmRUeXBlKSwKICAgIC8vICAgcmV3YXJkUmF0ZTogbmV3IGFyYzQuVWludDY0KHJld2FyZFJhdGUpLAogICAgLy8gICB1dGlsaXR5OiBuZXcgYXJjNC5TdHIodXRpbGl0eSksCiAgICAvLyB9KTsKICAgIHVuY292ZXIgMgogICAgZGlnIDE2CiAgICBjb25jYXQKICAgIGRpZyAxNQogICAgY29uY2F0CiAgICBkaWcgMTQKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBjb25jYXQKICAgIGRpZyAxMQogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGJ5dGVjXzMgLy8gMHgwMDU1CiAgICBjb25jYXQKICAgIHB1c2hpbnQgODUgLy8gODUKICAgIGRpZyA4CiAgICArCiAgICBzd2FwCiAgICBkaWcgNwogICAgY29uY2F0CiAgICBzd2FwCiAgICBpdG9iCiAgICBleHRyYWN0IDYgMgogICAgY29uY2F0CiAgICBkaWcgOAogICAgY29uY2F0CiAgICBkaWcgNAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjEyNwogICAgLy8gdGhpcy5zdGFrZXMoc3Rha2VLZXkpLnZhbHVlID0gY2xvbmUobmV3U3Rha2UpOwogICAgc3dhcAogICAgZHVwCiAgICBib3hfZGVsCiAgICBwb3AKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIGIgc3Rha2VfYWZ0ZXJfaWZfZWxzZUA4CgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC53aXRoZHJhd1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3OgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMzYKICAgIC8vIEBhYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBpbnRjXzAgLy8gMAogICAgZXh0cmFjdF91aW50MTYgLy8gb24gZXJyb3I6IGludmFsaWQgYXJyYXkgbGVuZ3RoIGhlYWRlcgogICAgaW50Y18zIC8vIDIKICAgICsKICAgIGRpZyAxCiAgICBsZW4KICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuZHluYW1pY19hcnJheTxhcmM0LnVpbnQ4PgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNDAKICAgIC8vIGNvbnN0IHNlcGFyYXRvciA9IG5ldyBhcmM0LlN0cigiXyIpLmJ5dGVzOwogICAgYnl0ZWNfMCAvLyAweDAwMDE1ZgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNDIKICAgIC8vIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNDMKICAgIC8vIFR4bi5zZW5kZXIuYnl0ZXMKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTQxLTE0NAogICAgLy8gY29uc3Qgc3Rha2VLZXkgPSBvcC5jb25jYXQoCiAgICAvLyAgIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIC8vICAgVHhuLnNlbmRlci5ieXRlcwogICAgLy8gKTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozOAogICAgLy8gcHJpdmF0ZSBzdGFrZXMgPSBCb3hNYXA8Ynl0ZXMsIFN0YWtlRGF0YT4oeyBrZXlQcmVmaXg6ICJzdGFrZV8iIH0pOwogICAgYnl0ZWNfMSAvLyAic3Rha2VfIgogICAgc3dhcAogICAgY29uY2F0CiAgICBkdXBuIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTQ3CiAgICAvLyBhc3NlcnQodGhpcy5zdGFrZXMoc3Rha2VLZXkpLmV4aXN0cywgIk5vIGFjdGl2ZSBzdGFrZSBmb3VuZCIpOwogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gTm8gYWN0aXZlIHN0YWtlIGZvdW5kCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE1MgogICAgLy8gY29uc3QgY3VycmVudFNlbmRlckFkZHIgPSBuZXcgYXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpOwogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNTQKICAgIC8vIHN0YWtlRGF0YS5zdGFrZXIubmF0aXZlID09PSBjdXJyZW50U2VuZGVyQWRkci5uYXRpdmUsCiAgICBkaWcgMQogICAgaW50Y18wIC8vIDAKICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgIGJveF9leHRyYWN0CiAgICA9PQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNTMtMTU2CiAgICAvLyBhc3NlcnQoCiAgICAvLyAgIHN0YWtlRGF0YS5zdGFrZXIubmF0aXZlID09PSBjdXJyZW50U2VuZGVyQWRkci5uYXRpdmUsCiAgICAvLyAgICJOb3QgdGhlIHN0YWtlciIKICAgIC8vICk7CiAgICBhc3NlcnQgLy8gTm90IHRoZSBzdGFrZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTU4CiAgICAvLyBjb25zdCBjdXJyZW50VGltZSA9IEdsb2JhbC5sYXRlc3RUaW1lc3RhbXA7CiAgICBnbG9iYWwgTGF0ZXN0VGltZXN0YW1wCiAgICBzd2FwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE2MQogICAgLy8gaWYgKCFzdGFrZURhdGEuaXNGbGV4aWJsZS5uYXRpdmUpIHsKICAgIHB1c2hpbnQgNDAgLy8gNDAKICAgIGludGNfMiAvLyAxCiAgICBib3hfZXh0cmFjdAogICAgaW50Y18wIC8vIDAKICAgIGdldGJpdAogICAgcHVzaGJ5dGVzIDB4MDAKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgaW50Y18wIC8vIDAKICAgIGdldGJpdAogICAgYm56IHdpdGhkcmF3X2FmdGVyX2lmX2Vsc2VAMwogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNjMKICAgIC8vIGN1cnJlbnRUaW1lID49IHN0YWtlRGF0YS5sb2NrRW5kVGltZS5hc1VpbnQ2NCgpLAogICAgZGlnIDEKICAgIHB1c2hpbnQgNjUgLy8gNjUKICAgIGludGNfMSAvLyA4CiAgICBib3hfZXh0cmFjdAogICAgYnRvaQogICAgZGlnIDEKICAgIDw9CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE2Mi0xNjUKICAgIC8vIGFzc2VydCgKICAgIC8vICAgY3VycmVudFRpbWUgPj0gc3Rha2VEYXRhLmxvY2tFbmRUaW1lLmFzVWludDY0KCksCiAgICAvLyAgICJMb2NrIHBlcmlvZCBub3QgZW5kZWQiCiAgICAvLyApOwogICAgYXNzZXJ0IC8vIExvY2sgcGVyaW9kIG5vdCBlbmRlZAoKd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNjktMTc2CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogc3Rha2VEYXRhLmFtb3VudC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNzEKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE3MgogICAgLy8geGZlckFzc2V0OiBzdGFrZURhdGEudG9rZW5JZC5hc1VpbnQ2NCgpLAogICAgZGlnIDIKICAgIGR1cAogICAgcHVzaGludCAzMiAvLyAzMgogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICBidG9pCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE3MwogICAgLy8gYXNzZXRBbW91bnQ6IHN0YWtlRGF0YS5hbW91bnQuYXNVaW50NjQoKSwKICAgIGRpZyAxCiAgICBwdXNoaW50IDQxIC8vIDQxCiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIGJ0b2kKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBzd2FwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTY5LTE3NQogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHN0YWtlRGF0YS5hbW91bnQuYXNVaW50NjQoKSwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNzQKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxNjktMTc2CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogc3Rha2VEYXRhLmFtb3VudC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTgyCiAgICAvLyB0aGlzLnN0YWtlcyhzdGFrZUtleSkuZGVsZXRlKCk7CiAgICBib3hfZGVsCiAgICBwb3AKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTM2CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGJ5dGVjXzIgLy8gMHgxNTFmN2M3NTAwMjAKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTg0CiAgICAvLyByZXR1cm4gVHhuLnR4SWQ7CiAgICB0eG4gVHhJRAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxMzYKICAgIC8vIEBhYmltZXRob2QoKQogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmVtZXJnZW5jeVdpdGhkcmF3W3JvdXRpbmddKCkgLT4gdm9pZDoKZW1lcmdlbmN5V2l0aGRyYXc6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE5MQogICAgLy8gQGFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGludGNfMCAvLyAwCiAgICBleHRyYWN0X3VpbnQxNiAvLyBvbiBlcnJvcjogaW52YWxpZCBhcnJheSBsZW5ndGggaGVhZGVyCiAgICBpbnRjXzMgLy8gMgogICAgKwogICAgZGlnIDEKICAgIGxlbgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5keW5hbWljX2FycmF5PGFyYzQudWludDg+CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18xIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICBkdXAKICAgIGNvdmVyIDMKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIwMAogICAgLy8gb3AuY29uY2F0KHBvb2xJZEJ5dGVzLCBzZXBhcmF0b3IpLAogICAgc3dhcAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoxOTgKICAgIC8vIGNvbnN0IHNlcGFyYXRvciA9IG5ldyBhcmM0LlN0cigiXyIpLmJ5dGVzOwogICAgYnl0ZWNfMCAvLyAweDAwMDE1ZgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMDAKICAgIC8vIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMDEKICAgIC8vIFR4bi5zZW5kZXIuYnl0ZXMKICAgIHR4biBTZW5kZXIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTk5LTIwMgogICAgLy8gY29uc3Qgc3Rha2VLZXkgPSBvcC5jb25jYXQoCiAgICAvLyAgIG9wLmNvbmNhdChwb29sSWRCeXRlcywgc2VwYXJhdG9yKSwKICAgIC8vICAgVHhuLnNlbmRlci5ieXRlcwogICAgLy8gKTsKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czozOAogICAgLy8gcHJpdmF0ZSBzdGFrZXMgPSBCb3hNYXA8Ynl0ZXMsIFN0YWtlRGF0YT4oeyBrZXlQcmVmaXg6ICJzdGFrZV8iIH0pOwogICAgYnl0ZWNfMSAvLyAic3Rha2VfIgogICAgc3dhcAogICAgY29uY2F0CiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjA0CiAgICAvLyBhc3NlcnQodGhpcy5zdGFrZXMoc3Rha2VLZXkpLmV4aXN0cywgIk5vIGFjdGl2ZSBzdGFrZSBmb3VuZCIpOwogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGFzc2VydCAvLyBObyBhY3RpdmUgc3Rha2UgZm91bmQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjA4CiAgICAvLyBjb25zdCBjdXJyZW50U2VuZGVyQWRkciA9IG5ldyBhcmM0LkFkZHJlc3MoVHhuLnNlbmRlcik7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIxMAogICAgLy8gc3Rha2VEYXRhLnN0YWtlci5uYXRpdmUgPT09IGN1cnJlbnRTZW5kZXJBZGRyLm5hdGl2ZSwKICAgIGRpZyAxCiAgICBpbnRjXzAgLy8gMAogICAgcHVzaGludCAzMiAvLyAzMgogICAgYm94X2V4dHJhY3QKICAgID09CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIwOS0yMTIKICAgIC8vIGFzc2VydCgKICAgIC8vICAgc3Rha2VEYXRhLnN0YWtlci5uYXRpdmUgPT09IGN1cnJlbnRTZW5kZXJBZGRyLm5hdGl2ZSwKICAgIC8vICAgIk5vdCB0aGUgc3Rha2VyIgogICAgLy8gKTsKICAgIGFzc2VydCAvLyBOb3QgdGhlIHN0YWtlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMTYKICAgIC8vIChzdGFrZURhdGEuYW1vdW50LmFzVWludDY0KCkgKiBwZW5hbHR5UGVyY2VudGFnZSkgLyBCQVNJU19QT0lOVFNfRElWSVNPUgogICAgZHVwCiAgICBwdXNoaW50IDQxIC8vIDQxCiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIGJ0b2kKICAgIGR1cAogICAgdW5jb3ZlciAzCiAgICAqCiAgICBwdXNoaW50IDEwMDAwIC8vIDEwMDAwCiAgICAvCiAgICBkdXAKICAgIGNvdmVyIDMKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjE4CiAgICAvLyBjb25zdCBhbW91bnRUb1JldHVybiA9IFVpbnQ2NChzdGFrZURhdGEuYW1vdW50LmFzVWludDY0KCkgLSBwZW5hbHR5KTsKICAgIHN3YXAKICAgIGRpZyAxCiAgICAtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIyMS0yMjgKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgICAgeGZlckFzc2V0OiBzdGFrZURhdGEudG9rZW5JZC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBhbW91bnRUb1JldHVybiwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjIzCiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMjQKICAgIC8vIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIHVuY292ZXIgMwogICAgcHVzaGludCAzMiAvLyAzMgogICAgaW50Y18xIC8vIDgKICAgIGJveF9leHRyYWN0CiAgICBidG9pCiAgICBkdXAKICAgIGNvdmVyIDQKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMjEtMjI3CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogYW1vdW50VG9SZXR1cm4sCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgcHVzaGludCA0IC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjI2CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjIxLTIyOAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHN0YWtlRGF0YS50b2tlbklkLmFzVWludDY0KCksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudFRvUmV0dXJuLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjMxCiAgICAvLyBpZiAocGVuYWx0eSA+IDApIHsKICAgIGJ6IGVtZXJnZW5jeVdpdGhkcmF3X2FmdGVyX2lmX2Vsc2VANQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyMzItMjM5CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiB0cmVhc3VyeUFkZHJlc3MubmF0aXZlLAogICAgLy8gICAgIHhmZXJBc3NldDogc3Rha2VEYXRhLnRva2VuSWQuYXNVaW50NjQoKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogcGVuYWx0eSwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIGRpZyAxCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBkdXAKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBkaWcgMwogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIzMi0yMzgKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRyZWFzdXJ5QWRkcmVzcy5uYXRpdmUsCiAgICAvLyAgICAgeGZlckFzc2V0OiBzdGFrZURhdGEudG9rZW5JZC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBwZW5hbHR5LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIHB1c2hpbnQgNCAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIzNwogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjIzMi0yMzkKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRyZWFzdXJ5QWRkcmVzcy5uYXRpdmUsCiAgICAvLyAgICAgeGZlckFzc2V0OiBzdGFrZURhdGEudG9rZW5JZC5hc1VpbnQ2NCgpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBwZW5hbHR5LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKCmVtZXJnZW5jeVdpdGhkcmF3X2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjQzCiAgICAvLyB0aGlzLnN0YWtlcyhzdGFrZUtleSkuZGVsZXRlKCk7CiAgICBkaWcgMgogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjE5MQogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBieXRlY18yIC8vIDB4MTUxZjdjNzUwMDIwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI0NQogICAgLy8gcmV0dXJuIFR4bi50eElkOwogICAgdHhuIFR4SUQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MTkxCiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgoKLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC5oYXNWYWxpZFN0YWtlW3JvdXRpbmddKCkgLT4gdm9pZDoKaGFzVmFsaWRTdGFrZToKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjUxCiAgICAvLyBAYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGNvdmVyIDIKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjYyCiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICBzd2FwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI1OQogICAgLy8gY29uc3Qgc2VwYXJhdG9yID0gbmV3IGFyYzQuU3RyKCJfIikuYnl0ZXM7CiAgICBieXRlY18wIC8vIDB4MDAwMTVmCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI2MgogICAgLy8gb3AuY29uY2F0KHBvb2xJZEJ5dGVzLCBzZXBhcmF0b3IpLAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI2MS0yNjQKICAgIC8vIGNvbnN0IHN0YWtlS2V5ID0gb3AuY29uY2F0KAogICAgLy8gICBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICAvLyAgIHVzZXJBZGRyQnl0ZXMKICAgIC8vICk7CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzgKICAgIC8vIHByaXZhdGUgc3Rha2VzID0gQm94TWFwPGJ5dGVzLCBTdGFrZURhdGE+KHsga2V5UHJlZml4OiAic3Rha2VfIiB9KTsKICAgIGJ5dGVjXzEgLy8gInN0YWtlXyIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgZHVwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI2NgogICAgLy8gaWYgKCF0aGlzLnN0YWtlcyhzdGFrZUtleSkuZXhpc3RzKSB7CiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIGJueiBoYXNWYWxpZFN0YWtlX2FmdGVyX2lmX2Vsc2VAMwogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNjcKICAgIC8vIHJldHVybiBmYWxzZTsKICAgIGludGNfMCAvLyAwCgpoYXNWYWxpZFN0YWtlX2FmdGVyX2lubGluZWRfc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC5oYXNWYWxpZFN0YWtlQDY6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI1MQogICAgLy8gQGFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBwdXNoYnl0ZXMgMHgwMAogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMgogICAgc2V0Yml0CiAgICBieXRlYyA0IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzIgLy8gMQogICAgcmV0dXJuCgpoYXNWYWxpZFN0YWtlX2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjczCiAgICAvLyBpZiAoc3Rha2VEYXRhLmFtb3VudC5hc1VpbnQ2NCgpIDwgbWluaW11bUFtb3VudCkgewogICAgZHVwCiAgICBwdXNoaW50IDQxIC8vIDQxCiAgICBpbnRjXzEgLy8gOAogICAgYm94X2V4dHJhY3QKICAgIGJ0b2kKICAgIGRpZyAyCiAgICA8CiAgICBieiBoYXNWYWxpZFN0YWtlX2FmdGVyX2lmX2Vsc2VANQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNzQKICAgIC8vIHJldHVybiBmYWxzZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI1MQogICAgLy8gQGFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBiIGhhc1ZhbGlkU3Rha2VfYWZ0ZXJfaW5saW5lZF9zbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmhhc1ZhbGlkU3Rha2VANgoKaGFzVmFsaWRTdGFrZV9hZnRlcl9pZl9lbHNlQDU6CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI3NwogICAgLy8gcmV0dXJuIHRydWU7CiAgICBpbnRjXzIgLy8gMQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyNTEKICAgIC8vIEBhYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYiBoYXNWYWxpZFN0YWtlX2FmdGVyX2lubGluZWRfc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo6QWxnb1N0YWtlWC5oYXNWYWxpZFN0YWtlQDYKCgovLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLmdldFN0YWtlSW5mb1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFN0YWtlSW5mbzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MjgzCiAgICAvLyBAYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIGV4dHJhY3RfdWludDE2IC8vIG9uIGVycm9yOiBpbnZhbGlkIGFycmF5IGxlbmd0aCBoZWFkZXIKICAgIGludGNfMyAvLyAyCiAgICArCiAgICBkaWcgMQogICAgbGVuCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LmR5bmFtaWNfYXJyYXk8YXJjNC51aW50OD4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6Mjg5CiAgICAvLyBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICBzd2FwCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI4NgogICAgLy8gY29uc3Qgc2VwYXJhdG9yID0gbmV3IGFyYzQuU3RyKCJfIikuYnl0ZXM7CiAgICBieXRlY18wIC8vIDB4MDAwMTVmCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI4OQogICAgLy8gb3AuY29uY2F0KHBvb2xJZEJ5dGVzLCBzZXBhcmF0b3IpLAogICAgY29uY2F0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjI4OC0yOTEKICAgIC8vIGNvbnN0IHN0YWtlS2V5ID0gb3AuY29uY2F0KAogICAgLy8gICBvcC5jb25jYXQocG9vbElkQnl0ZXMsIHNlcGFyYXRvciksCiAgICAvLyAgIHVzZXJBZGRyQnl0ZXMKICAgIC8vICk7CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6MzgKICAgIC8vIHByaXZhdGUgc3Rha2VzID0gQm94TWFwPGJ5dGVzLCBTdGFrZURhdGE+KHsga2V5UHJlZml4OiAic3Rha2VfIiB9KTsKICAgIGJ5dGVjXzEgLy8gInN0YWtlXyIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyOTMKICAgIC8vIGFzc2VydCh0aGlzLnN0YWtlcyhzdGFrZUtleSkuZXhpc3RzLCAiTm8gc3Rha2UgZm91bmQiKTsKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICBhc3NlcnQgLy8gTm8gc3Rha2UgZm91bmQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6Mjk1CiAgICAvLyByZXR1cm4gY2xvbmUodGhpcy5zdGFrZXMoc3Rha2VLZXkpLnZhbHVlKTsKICAgIGJveF9nZXQKICAgIHBvcAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czoyODMKICAgIC8vIEBhYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYnl0ZWMgNCAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18yIC8vIDEKICAgIHJldHVybgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OkFsZ29TdGFrZVguZG9uYXRlVG9rZW5zW3JvdXRpbmddKCkgLT4gdm9pZDoKZG9uYXRlVG9rZW5zOgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MDAKICAgIC8vIEBhYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDAzLTQxMAogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgeGZlckFzc2V0OiB0b2tlbklkLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiAwLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MDUKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDA3CiAgICAvLyBhc3NldEFtb3VudDogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQwMy00MDkKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIHhmZXJBc3NldDogdG9rZW5JZCwKICAgIC8vICAgICBhc3NldEFtb3VudDogMCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBwdXNoaW50IDQgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MDgKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MDMtNDEwCiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IDAsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MDAKICAgIC8vIEBhYmltZXRob2QoKQogICAgYnl0ZWNfMiAvLyAweDE1MWY3Yzc1MDAyMAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MTIKICAgIC8vIHJldHVybiBUeG4udHhJZDsKICAgIHR4biBUeElECiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQwMAogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18yIC8vIDEKICAgIHJldHVybgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OkFsZ29TdGFrZVgud2l0aGRyYXdFeGNlc3NUb2tlbnNbcm91dGluZ10oKSAtPiB2b2lkOgp3aXRoZHJhd0V4Y2Vzc1Rva2VuczoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDE5CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzEgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDIzCiAgICAvLyBUeG4uc2VuZGVyID09PSBHbG9iYWwuY3JlYXRvckFkZHJlc3MsCiAgICB0eG4gU2VuZGVyCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgID09CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQyMi00MjUKICAgIC8vIGFzc2VydCgKICAgIC8vICAgVHhuLnNlbmRlciA9PT0gR2xvYmFsLmNyZWF0b3JBZGRyZXNzLAogICAgLy8gICAiT25seSBhZG1pbiBjYW4gd2l0aGRyYXcgZXhjZXNzIgogICAgLy8gKTsKICAgIGFzc2VydCAvLyBPbmx5IGFkbWluIGNhbiB3aXRoZHJhdyBleGNlc3MKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDI5LTQzNgogICAgLy8gaXR4bgogICAgLy8gICAuYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IHRva2VuSWQsCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDMxCiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MjktNDM1CiAgICAvLyBpdHhuCiAgICAvLyAgIC5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICAgIHhmZXJBc3NldDogdG9rZW5JZCwKICAgIC8vICAgICBhc3NldEFtb3VudDogYW1vdW50LAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIHB1c2hpbnQgNCAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQzNAogICAgLy8gZmVlOiAwLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQyOS00MzYKICAgIC8vIGl0eG4KICAgIC8vICAgLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgICAgeGZlckFzc2V0OiB0b2tlbklkLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiBhbW91bnQsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MTkKICAgIC8vIEBhYmltZXRob2QoKQogICAgYnl0ZWNfMiAvLyAweDE1MWY3Yzc1MDAyMAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0MzgKICAgIC8vIHJldHVybiBUeG4udHhJZDsKICAgIHR4biBUeElECiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQxOQogICAgLy8gQGFiaW1ldGhvZCgpCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18yIC8vIDEKICAgIHJldHVybgoKCi8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6OkFsZ29TdGFrZVguZnVuZENvbnRyYWN0W3JvdXRpbmddKCkgLT4gdm9pZDoKZnVuZENvbnRyYWN0OgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NDQKICAgIC8vIEBhYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMSAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NDcKICAgIC8vIFR4bi5zZW5kZXIgPT09IEdsb2JhbC5jcmVhdG9yQWRkcmVzcywKICAgIHR4biBTZW5kZXIKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgPT0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDQ2LTQ0OQogICAgLy8gYXNzZXJ0KAogICAgLy8gICBUeG4uc2VuZGVyID09PSBHbG9iYWwuY3JlYXRvckFkZHJlc3MsCiAgICAvLyAgICJPbmx5IGFkbWluIGNhbiBmdW5kIHRoZSBjb250cmFjdCIKICAgIC8vICk7CiAgICBhc3NlcnQgLy8gT25seSBhZG1pbiBjYW4gZnVuZCB0aGUgY29udHJhY3QKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDUxLTQ1NwogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgYW1vdW50OiBhbW91bnQsCiAgICAvLyAgICAgcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NTQKICAgIC8vIHJlY2VpdmVyOiBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcywKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NTEtNDU2CiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICBhbW91bnQ6IGFtb3VudCwKICAgIC8vICAgICByZWNlaXZlcjogR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgaW50Y18yIC8vIDEKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDU1CiAgICAvLyBmZWU6IDAsCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDUxLTQ1NwogICAgLy8gaXR4bgogICAgLy8gICAucGF5bWVudCh7CiAgICAvLyAgICAgYW1vdW50OiBhbW91bnQsCiAgICAvLyAgICAgcmVjZWl2ZXI6IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzLAogICAgLy8gICAgIGZlZTogMCwKICAgIC8vICAgfSkKICAgIC8vICAgLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDQ0CiAgICAvLyBAYWJpbWV0aG9kKCkKICAgIGludGNfMiAvLyAxCiAgICByZXR1cm4KCgovLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjpBbGdvU3Rha2VYLndpdGhkcmF3RXhjZXNzQWxnb1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3RXhjZXNzQWxnbzoKICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDY2CiAgICAvLyBUeG4uc2VuZGVyID09PSBHbG9iYWwuY3JlYXRvckFkZHJlc3MsCiAgICB0eG4gU2VuZGVyCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgID09CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ2NS00NjgKICAgIC8vIGFzc2VydCgKICAgIC8vICAgVHhuLnNlbmRlciA9PT0gR2xvYmFsLmNyZWF0b3JBZGRyZXNzLAogICAgLy8gICAiT25seSBhZG1pbiBjYW4gd2l0aGRyYXcgZnVuZHMiCiAgICAvLyApOwogICAgYXNzZXJ0IC8vIE9ubHkgYWRtaW4gY2FuIHdpdGhkcmF3IGZ1bmRzCiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ3MQogICAgLy8gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MuYmFsYW5jZSAtIE1JTl9CQUxBTkNFCiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgYWNjdF9wYXJhbXNfZ2V0IEFjY3RCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBmdW5kZWQKICAgIHB1c2hpbnQgMTAwMDAwIC8vIDEwMDAwMAogICAgLQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NzQKICAgIC8vIGFzc2VydChhbW91bnRUb1dpdGhkcmF3ID4gVWludDY0KDApLCAiTm8gZXhjZXNzIGJhbGFuY2UgdG8gd2l0aGRyYXciKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vIGV4Y2VzcyBiYWxhbmNlIHRvIHdpdGhkcmF3CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ3Ni00ODIKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIGFtb3VudDogYW1vdW50VG9XaXRoZHJhdywKICAgIC8vICAgICByZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICAvLyAgIC5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIHNtYXJ0X2NvbnRyYWN0cy9BbGdvU3Rha2VYL2NvbnRyYWN0LmFsZ28udHM6NDc5CiAgICAvLyByZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICAvLyBzbWFydF9jb250cmFjdHMvQWxnb1N0YWtlWC9jb250cmFjdC5hbGdvLnRzOjQ3Ni00ODEKICAgIC8vIGl0eG4KICAgIC8vICAgLnBheW1lbnQoewogICAgLy8gICAgIGFtb3VudDogYW1vdW50VG9XaXRoZHJhdywKICAgIC8vICAgICByZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgICBmZWU6IDAsCiAgICAvLyAgIH0pCiAgICBpbnRjXzIgLy8gMQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0ODAKICAgIC8vIGZlZTogMCwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NzYtNDgyCiAgICAvLyBpdHhuCiAgICAvLyAgIC5wYXltZW50KHsKICAgIC8vICAgICBhbW91bnQ6IGFtb3VudFRvV2l0aGRyYXcsCiAgICAvLyAgICAgcmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgICAgZmVlOiAwLAogICAgLy8gICB9KQogICAgLy8gICAuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc21hcnRfY29udHJhY3RzL0FsZ29TdGFrZVgvY29udHJhY3QuYWxnby50czo0NjMKICAgIC8vIEBhYmltZXRob2QoKQogICAgaW50Y18yIC8vIDEKICAgIHJldHVybgo=",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 0,
            "num_uints": 0
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 0
        }
    },
    "schema": {
        "global": {
            "declared": {},
            "reserved": {}
        },
        "local": {
            "declared": {},
            "reserved": {}
        }
    },
    "contract": {
        "name": "AlgoStakeX",
        "methods": [
            {
                "name": "stake",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "uint64",
                        "name": "tokenId"
                    },
                    {
                        "type": "bool",
                        "name": "isFlexible"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    },
                    {
                        "type": "uint64",
                        "name": "lockPeriod"
                    },
                    {
                        "type": "string",
                        "name": "rewardType"
                    },
                    {
                        "type": "uint64",
                        "name": "rewardRate"
                    },
                    {
                        "type": "string",
                        "name": "utility"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Stake tokens into a pool\nTransaction group expected:\n[0] App call: stake\n[1] Asset transfer: User \u2192 Contract"
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Withdraw staked tokens with rewards"
            },
            {
                "name": "emergencyWithdraw",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "uint64",
                        "name": "penaltyPercentage"
                    },
                    {
                        "type": "address",
                        "name": "treasuryAddress"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Emergency withdraw with penalty (for locked staking)\nPenalty tokens are sent to treasury wallet for recycling"
            },
            {
                "name": "hasValidStake",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "string",
                        "name": "userAddress"
                    },
                    {
                        "type": "uint64",
                        "name": "minimumAmount"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "bool"
                },
                "desc": "Check if user has valid stake (for access control)"
            },
            {
                "name": "getStakeInfo",
                "args": [
                    {
                        "type": "string",
                        "name": "poolId"
                    },
                    {
                        "type": "string",
                        "name": "userAddress"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "(address,uint64,bool,uint64,uint64,uint64,uint64,string,uint64,string)"
                },
                "desc": "Get stake information for a user"
            },
            {
                "name": "donateTokens",
                "args": [
                    {
                        "type": "uint64",
                        "name": "tokenId"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Donate tokens to contract (no staking)\nTransaction group:\n[0] App call: donateTokens\n[1] Asset transfer: User \u2192 Contract"
            },
            {
                "name": "withdrawExcessTokens",
                "args": [
                    {
                        "type": "uint64",
                        "name": "tokenId"
                    },
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[]"
                },
                "desc": "Withdraw excess tokens from contract (admin only)\nOnly withdraws tokens that are NOT currently staked"
            },
            {
                "name": "fundContract",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Fund contract with ALGO for MBR"
            },
            {
                "name": "withdrawExcessAlgo",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Withdraw excess ALGO from contract"
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "no_op": "CREATE"
    }
}